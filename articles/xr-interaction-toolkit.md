---
title: ""
emoji: "🌟"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# XR インタラクション ツールキット
XR Interaction Toolkit パッケージは、VR および AR エクスペリエンスを作成するための、高レベルのコンポーネントベースのインタラクション システムです。Unity 入力イベントから 3D および UI インタラクションを利用できるようにするフレームワークを提供します。このシステムの中核となるのは、基本の Interactor および Interactable コンポーネントのセットと、これら 2 種類のコンポーネントを結び付ける Interaction Manager です。また、移動やビジュアルの描画に使用できるコンポーネントも含まれています。

XR インタラクション ツールキットには、次のインタラクション タスクをサポートするコンポーネントのセットが含まれています。

- クロスプラットフォーム XR コントローラー入力: Meta Quest (Oculus)、OpenXR、Windows Mixed Reality など。
- 基本的なオブジェクトのホバー、選択、グラブ
- XRコントローラーによる触覚フィードバック
- 可能なアクティブなインタラクションを示す視覚的なフィードバック（色合い/線のレンダリング）
- XR コントローラーを使用した基本的なキャンバス UI の操作
- 静止およびルームスケールの VR 体験を扱うための VR カメラ リグである XR Origin を操作するためのユーティリティ
パッケージ内の AR インタラクション コンポーネントを使用するには、プロジェクトにAR Foundationパッケージが必要です。XR インタラクション ツールキットによって提供される AR 機能には、次のものが含まれます。

- AR ジェスチャ システムは、を介して画面タッチを入力システムのジェスチャ イベントにマッピングしますTouchscreenGestureInputController。
- XRRayInteractorAR で動作するスクリーン スペース インタラクション データを供給するさまざまなスクリーン スペース入力コンポーネント。
- ARTransformer配置、選択、移動、回転、拡大縮小などのジェスチャをオブジェクトの操作に変換します。
- 最後に、作業中のプロジェクト用のハードウェアがない場合や、ヘッドセットを装着せずにインタラクションをテストしたい場合には、 XR デバイスシミュレーターを使用してすべてのインタラクションをシミュレートすることができます。詳細については、「XR デバイス シミュレーターの概要」を参照してください。

## 技術的な詳細
### 要件
このバージョンの XR インタラクション ツールキットは、次のバージョンの Unity エディターと互換性があります。

2021.3以降
### 依存関係
XR Interaction Toolkit パッケージには、インストール時にプロジェクトに自動的に追加されるいくつかの依存関係があります。

入力システム (com.unity.inputsystem)
数学 (com.unity.mathematics)
Unity UI (com.unity.ugui)
XR コア ユーティリティ (com.unity.xr.core-utils)
組み込みモジュール
オーディオ
IMGUY について
物理
ＸＲ
#### オプションの依存関係
パッケージに含まれる追加の AR インタラクション コンポーネントを有効にするには、パッケージ マネージャーを使用してAR Foundation (com.unity.xr.arfoundation) をプロジェクトに追加する必要があります。

一部の動作で追加のプロパティを有効にするには、パッケージ マネージャーを使用してアニメーションモジュールをプロジェクトに追加する必要があります。

### 既知の制限
- XR Grab Interactables で複数のインタラクタのサポートを使用し、ソケット インタラクタとダイレクト/レイ インタラクタの間で転送する場合、Attach Ease In Timeが 0 に設定されていると、1 フレームの視覚的なスキップが発生する可能性があります。この視覚的な乱れを軽減するには、Attach Ease In Time を最小の 0.15 に設定します。プロジェクトで実行時にダイレクト/レイ インタラクタを有効または無効にせず、ソケットを最後に登録する場合は、コントローラー インタラクタが XR Interaction Manager に登録された後に、ソケット インタラクタを含むシーンをロードすることでもこの問題を解決できます。

- 編集 > プロジェクト設定 > XR プラグイン管理で XR プラグイン プロバイダーが有効になっていて実行されている場合、マウス入力はワールド スペース UI と対話しません。詳細については、問題追跡に従ってください。( 1400186 )

- ダイレクト/レイ インタラクタでHide Controller On Selectプロパティが有効になっている場合、スターター アセット サンプルの Poke Interactor プレハブの Poke Point ビジュアルは、コントローラ モデルとともに非表示になりません。

- 組み込みレンダリング パイプラインで Shader Graph シェーダーを使用する場合、シングルパス インスタンス レンダリングはサポートされません。これは、Hand Interaction Demo を含むサンプル アセットに含まれるシェーダーに影響します。(この問題の症状は、片方の目が正しくレンダリングされないことです。) プロジェクトで組み込みレンダリング パイプラインを使用している場合は、次のいずれかのアクションを実行することで問題を回避できます。

  - マルチパス レンダリングに切り替えます。(通常、マルチパス レンダリングのパフォーマンスはシングルパスよりもはるかに悪くなります。)
  - サンプル マテリアルを変更して、Shader Graph 以外のシェーダーを使用します。
  - ユニバーサル レンダー パイプライン (URP) を使用するようにプロジェクトを更新します。
  
# XR Interaction Toolkit の概要 

シーン内のインタラクションは、次の 2 つの重要な要素に基づいています。

- インタラクター: シーン内の要素は、通常、XR コントローラー ハードウェア、ハンド トラッキング、またはモバイル AR デバイスのタッチ スクリーンを通じてユーザーによって直接制御されます。インタラクターは、インタラクション可能なオブジェクトとのインタラクションを開始します。
- インタラクション可能オブジェクト: ユーザーがインタラクトできるシーン内のオブジェクト。インタラクト可能なオブジェクトには、どのようにインタラクトされているかを示す状態があります。
アクティブなインタラクタは、フレームごとに、どのインタラクション可能なインタラクション可能なオブジェクトを識別します。これらのインタラクション可能なオブジェクトはホバー状態になり、ホバー入力イベントをディスパッチします。このイベントを使用して、インタラクションが可能であるというフィードバックをユーザーに提供できます。その後、ユーザーはインタラクション可能なオブジェクトの選択を開始できます。これは、インタラクションの次の段階です。たとえば、ユーザーはコントローラの特定のボタンを押して、「ホバー」オブジェクトを選択する場合があります。選択されたインタラクション可能なオブジェクトは、選択状態になり、選択入力イベントをディスパッチします。次に何が起こるかは、インタラクタとインタラクタの種類、およびインタラクションの構成方法によって異なります。掴めるオブジェクトは、ユーザーによって拾われる場合があります。UI ScrollView は、ユーザーの指の動きに合わせてパンする場合があります。

XR インタラクション ツールキットは、次の 3 つの広範なインタラクション カテゴリを提供します。

- 3D オブジェクトのインタラクション: シーン内の GameObject を拾ったり、移動したり、何らかの動作をトリガーしたり、その他の方法で対話したりする機能。
- UI インタラクション: キャンバス上の UI コントロールと対話する機能。
- 移動: ユーザーがシーン内を移動する能力。テレポートや登攀などの移動モードには、インタラクタとインタラクタブルを使用します。連続移動やグラブ移動などの他の移動モードは、コントローラーのジョイスティックなどのユーザー入力に直接依存しており、インタラクタやインタラクタブルは必要ありません。
XR インタラクション ツールキットを使用するためのプロジェクトとシーンの設定方法、およびここで簡単に説明したトピックの詳細については、以下を参照してください。

| トピック          | 説明                                                                 |
|-------------------|----------|
| 始める            | ツールキットをインストールし、プロジェクトと個々のシーンを設定する方法。 |
| 入力              | 入力を設定、構成、カスタマイズする方法。                             |
| 3Dインタラクション | GameObject とのインタラクションを設定する方法。                      |
| 移動              | さまざまな移動モードを設定する方法。                                 |
| UIインタラクション | UI コンポーネントとのインタラクションを設定する方法。                |

# 始める

## インストール
このパッケージをインストールするには、Unity エディターのバージョンに一致する手順を参照してください。Unity エディターの各バージョンには、特定の検証済みバージョンの XR Interaction Toolkit (XRI) が付属していることに留意してください。最新バージョンの XRI パッケージにアクセスできるようにするには、プロジェクトの Unity エディターの最新パッチリリースに更新してください (可能な場合)。Unity エディターの最新パッチバージョンに更新できない場合は、XR Interaction Toolkit の新しいリリースにアクセスするには、Manual Installation以下の手順を参照して manifest.json を変更してください。

### バージョン 2022.1 以降
このパッケージをインストールするには、Unity ユーザーマニュアルのインストール手順に従うか、次のリンクをクリックして現在開いているプロジェクトでパッケージマネージャーを開きます: com.unity.xr.interaction.toolkit 。これにより、オプションのバージョンフィールドを含む「名前でパッケージを追加」ボックスが表示されます。 「追加」をクリックして、Unity エディターバージョン用の XR Interaction Toolkit の最新の検証済みバージョンをインストールします。

### バージョン 2021.3
#### 2021.3.9f1以降
このパッケージ (最小バージョン: 2.0.4) をインストールするには、Unity ユーザー マニュアルのインストール手順に従ってください。

#### 2021.3.8f1以前
このパッケージは、Unity 2021 の以前のバージョンではエディター マニフェストにリストされていませんでした。このため、インストールは手動で行う必要があります。このパッケージをインストールするには、次の手順を実行します。

1. 使用する予定のプロジェクトを開きます。

2. 次のリンクをクリックすると、パッケージ マネージャーで名前によるパッケージの追加ウィンドウが表示されます: com.unity.xr.interaction.toolkit@3.0.6
![alt text](image.png)

3. バージョンは自動的に入力されますが、以下の表を参照して正しいバージョンであることを確認してください。

4. [追加]をクリックします。

|テキストフィールド|Value|
|------------------|-----|
|name|com.unity.xr.interaction.toolkit|
|バージョン(オプション)|3.0.6|

## メッセージ
Zenn独自のもの

:::message
ここに注意すべき事項を
:::

:::message alert
メッセージをここに
:::

::: details クリックして詳細を表示
詳細な情報をここに
:::

::::details クリックして詳細を表示
:::message
ネスト化したいときはコロンを増やせばいい
:::
::::

## リンクカード
### URLだけの行
https://zenn.dev/zenn/articles/markdown-guide
普通のWebサイトの他、YoutubeやTwitterもリンクカードになる

